<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
    <title>Avatar Resizer Plugin Readme</title>
    <style type="text/css">
        BODY {
            font-size : 100%;
        }
        BODY, TD, TH {
            font-family : tahoma, verdana, arial, helvetica, sans-serif;
            font-size : 0.8em;
            text-align: left;
        }
        CAPTION {
            font-size: 0.7em;
            margin-top: 1.2em;
        }
        H2 {
            font-size : 10pt;
            font-weight : bold;
        }
        A:hover {
            text-decoration : none;
        }
        H1 {
            font-family : tahoma, arial, helvetica, sans-serif;
            font-size : 1.4em;
            font-weight: bold;
            border-bottom : 1px #ccc solid;
            padding-bottom : 2px;
        }

        TT {
            font-family : courier new;
            font-weight : bold;
            color : #060;
        }
        PRE {
            font-family : courier new;
            font-size : 100%;
        }
    </style>
</head>
<body>

<h1>
    Avatar Resizer Plugin Readme
</h1>

<h2>Overview</h2>

<p>
    The avatar resizer plugin will scale down VCard-based avatars, when the corresponding vCard is stored in Openfire
    (it will not affect avatars that are being transferred between end-users).
</p>
<p>
    Using avatars that are large can introduce problems for clients - not only will all of the data need to be
    transferred (which is done with inefficient base64-encoding), some clients have trouble displaying large sets. RAM
    and CPU spikes can occur as a result.
</p>
<p>
    To prevent these problems, this plugin scales Avatars from vCards, but only if the vCards are provided by Openfire
    itself (through one of its <a href="https://www.igniterealtime.org/builds/openfire/docs/latest/documentation/javadoc/org/jivesoftware/openfire/vcard/VCardProvider.html">VCardProvider</a>
    implementations, which include the default, database-oriented provider, an LDAP provider and a Atlassian Crowd
    provider).
</p>
<p>
    Avatar scaling of this plugin is in accordance with the guidelines listed in
    <a href="https://www.xmpp.org/extensions/xep-0153.html#bizrules-image">XEP&#8209;0153: vCard-Based Avatars</a>.
    Specifically, this plugin shrinks and crops the avatar to a 96 by 96 pixel square image (although the size is
    configurable, see below).
</p>

<h2>Installation</h2>

<p>
    Copy avatarResizer.jar into the plugins directory of your Openfire installation. The plugin will then be
    automatically deployed. To upgrade to a new version, copy the new avatarResizer.jar file over the existing file.
</p>

<h2>Configuration</h2>

<p>
    The plugin does not need configuration. Simply installing the plugin will enable it. The properties defined here can
    be set to override default behavior of the plugin.
</p>

<table>
    <caption>Openfire properties for the Avatar Resizer plugin</caption>
    <thead>
    <tr><th>Property name</th><th>Default value</th><th>Description</th></tr>
    </thead>
    <tbody>
    <tr>
        <td><tt>avatar.resize.targetdimension</tt></td>
        <td><pre>96</pre></td>
        <td>Size (in pixels) of the resized avatar.</td>
    </tr>
    </tbody>
</table>

<h2>Credits</h2>

<p>
    This plugin is based on an implementation by Aaron Sierra, which was contributed to IgniteRealtime through Mike Ray.
</p>
<p>
    Icons made by <a href="http://www.flaticon.com/authors/stephen-hutchings" title="Stephen Hutchings">Stephen Hutchings</a>
    from <a href="http://www.flaticon.com" title="Flaticon">www.flaticon.com</a>, licensed by
    <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a>.
</p>
</body>
</html>

